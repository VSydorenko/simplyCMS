
# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ—Å—Ç–∞–≤–∫–æ—é (Core) + –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –ø–ª–∞–≥—ñ–Ω—É –ù–æ–≤–∞ –ü–æ—à—Ç–∞

## –û–≥–ª—è–¥

–¶–µ–π –ø–ª–∞–Ω –æ–ø–∏—Å—É—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ª—É–∂–±–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ —è–¥—Ä—ñ CMS. –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ –≥–Ω—É—á–∫–æ—é —Ç–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω–æ—é —á–µ—Ä–µ–∑ –ø–ª–∞–≥—ñ–Ω–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ù–æ–≤–∞ –ü–æ—à—Ç–∞).

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

### –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å

```text
+------------------+       +------------------+       +------------------+
|  –°–ª—É–∂–±–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ |------>|  –ó–æ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏   |------>|    –¢–∞—Ä–∏—Ñ–∏        |
|  (shipping_      |       |  (shipping_      |       |  (shipping_      |
|   methods)       |       |   zones)         |       |   rates)         |
+------------------+       +------------------+       +------------------+
        |                          |
        |                          |
+------------------+       +------------------+
|  –õ–æ–∫–∞—Ü—ñ—ó –∑–æ–Ω     |<------|  –Ü—î—Ä–∞—Ä—Ö—ñ—è        |
|  (shipping_zone_ |       |  –ª–æ–∫–∞—Ü—ñ–π         |
|   locations)     |       |  (locations)     |
+------------------+       +------------------+
```

### –¢–∏–ø–∏ —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏

1. **–°–∏—Å—Ç–µ–º–Ω—ñ (–≤–±—É–¥–æ–≤–∞–Ω—ñ –≤ —è–¥—Ä–æ)**:
   - `pickup` - –°–∞–º–æ–≤–∏–≤—ñ–∑ (—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ —Ç–æ—á–∫–∏ –≤–∏–¥–∞—á—ñ)
   - `courier` - –ö—É—Ä'—î—Ä—Å—å–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ (—Ä—É—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞—Ä–∏—Ñ—ñ–≤)
   - `manual` - –†—É—á–Ω–∞ —Å–ª—É–∂–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–∞–¥–º—ñ–Ω —Å–∞–º –∑–∞–¥–∞—î –Ω–∞–∑–≤—É —Ç–∞ –ª–æ–≥—ñ–∫—É)

2. **–ü–ª–∞–≥—ñ–Ω–Ω—ñ (—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è)**:
   - `nova_poshta` - –ù–æ–≤–∞ –ü–æ—à—Ç–∞ (–æ–∫—Ä–µ–º–∏–π –ø–ª–∞–≥—ñ–Ω, –±—É–¥–µ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ)
   - `ukrposhta` - –£–∫—Ä–ø–æ—à—Ç–∞ (–ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ)
   - –Ü–Ω—à—ñ –ø–µ—Ä–µ–≤—ñ–∑–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ API

---

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—è `shipping_methods` (–°–ª—É–∂–±–∏ –¥–æ—Å—Ç–∞–≤–∫–∏)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| code | varchar | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–¥ (`pickup`, `courier`, `nova_poshta`) |
| name | text | –ù–∞–∑–≤–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è |
| description | text | –û–ø–∏—Å —Å–ª—É–∂–±–∏ |
| type | enum | `system` \| `manual` \| `plugin` |
| plugin_name | varchar? | –ù–∞–∑–≤–∞ –ø–ª–∞–≥—ñ–Ω–∞ (–¥–ª—è type=plugin) |
| is_active | boolean | –ß–∏ –∞–∫—Ç–∏–≤–Ω–∞ —Å–ª—É–∂–±–∞ |
| sort_order | integer | –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è |
| config | jsonb | –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è |
| icon | text? | –Ü–∫–æ–Ω–∫–∞ (Lucide name –∞–±–æ URL) |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |
| updated_at | timestamp | –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `locations` (–Ü—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫ –ª–æ–∫–∞—Ü—ñ–π)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| parent_id | uuid? | –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∞ –ª–æ–∫–∞—Ü—ñ—è |
| name | text | –ù–∞–∑–≤–∞ (–£–∫—Ä–∞—ó–Ω–∞, –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å, –ö–∏—ó–≤) |
| type | enum | `country` \| `region` \| `city` \| `district` \| `street` |
| code | varchar? | –ö–æ–¥ (UA, UA-32, —Ç–æ—â–æ) |
| sort_order | integer | –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è |
| is_active | boolean | –ß–∏ –∞–∫—Ç–∏–≤–Ω–∞ |
| meta | jsonb? | –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏, –ø–æ—à—Ç–æ–≤—ñ —ñ–Ω–¥–µ–∫—Å–∏) |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `shipping_zones` (–ó–æ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| name | text | –ù–∞–∑–≤–∞ –∑–æ–Ω–∏ ("–ö–∏—ó–≤ —ñ –ø–µ—Ä–µ–¥–º—ñ—Å—Ç—è", "–í—Å—è –£–∫—Ä–∞—ó–Ω–∞") |
| description | text? | –û–ø–∏—Å –∑–æ–Ω–∏ |
| is_active | boolean | –ß–∏ –∞–∫—Ç–∏–≤–Ω–∞ –∑–æ–Ω–∞ |
| is_default | boolean | –ó–æ–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–¥–ª—è –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –ª–æ–∫–∞—Ü—ñ–π) |
| sort_order | integer | –ü–æ—Ä—è–¥–æ–∫ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç) |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `shipping_zone_locations` (–ü—Ä–∏–≤'—è–∑–∫–∞ –ª–æ–∫–∞—Ü—ñ–π –¥–æ –∑–æ–Ω)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| zone_id | uuid | FK –Ω–∞ shipping_zones |
| location_id | uuid? | FK –Ω–∞ locations (—è–∫—â–æ –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞) |
| location_type | enum | `all` \| `country` \| `region` \| `city` \| `postcode` |
| location_code | varchar? | –ö–æ–¥ –ª–æ–∫–∞—Ü—ñ—ó (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ location_id) |
| postcode_from | varchar? | –ü–æ—á–∞—Ç–æ–∫ –¥—ñ–∞–ø–∞–∑–æ–Ω—É —ñ–Ω–¥–µ–∫—Å—ñ–≤ |
| postcode_to | varchar? | –ö—ñ–Ω–µ—Ü—å –¥—ñ–∞–ø–∞–∑–æ–Ω—É —ñ–Ω–¥–µ–∫—Å—ñ–≤ |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `shipping_rates` (–¢–∞—Ä–∏—Ñ–∏ –¥–æ—Å—Ç–∞–≤–∫–∏)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| method_id | uuid | FK –Ω–∞ shipping_methods |
| zone_id | uuid | FK –Ω–∞ shipping_zones |
| name | text | –ù–∞–∑–≤–∞ —Ç–∞—Ä–∏—Ñ—É ("–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞", "–ï–∫—Å–ø—Ä–µ—Å") |
| calculation_type | enum | `flat` \| `weight` \| `order_total` \| `free_from` \| `plugin` |
| base_cost | numeric | –ë–∞–∑–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å |
| per_kg_cost | numeric? | –í–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞ –∫–≥ (–¥–ª—è weight) |
| min_weight | numeric? | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤–∞–≥–∞ |
| free_from_amount | numeric? | –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –≤—ñ–¥ —Å—É–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| min_order_amount | numeric? | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| max_order_amount | numeric? | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| estimated_days | varchar? | –û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω ("1-2 –¥–Ω—ñ") |
| is_active | boolean | –ß–∏ –∞–∫—Ç–∏–≤–Ω–∏–π —Ç–∞—Ä–∏—Ñ |
| sort_order | integer | –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è |
| config | jsonb? | –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `pickup_points` (–¢–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| id | uuid | –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á |
| method_id | uuid | FK –Ω–∞ shipping_methods (pickup) |
| name | text | –ù–∞–∑–≤–∞ —Ç–æ—á–∫–∏ |
| address | text | –ê–¥—Ä–µ—Å–∞ |
| city | text | –ú—ñ—Å—Ç–æ |
| zone_id | uuid? | FK –Ω–∞ shipping_zones |
| working_hours | jsonb | –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏ |
| phone | varchar? | –¢–µ–ª–µ—Ñ–æ–Ω |
| is_active | boolean | –ß–∏ –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ—á–∫–∞ |
| sort_order | integer | –ü–æ—Ä—è–¥–æ–∫ |
| coordinates | jsonb? | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (lat, lng) |
| created_at | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

---

## –ó–º—ñ–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ `orders`

–û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –¥–æ—Å—Ç–∞–≤–∫—É:

| –ù–æ–≤–µ –ø–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å |
|-----------|-----|------|
| shipping_method_id | uuid? | FK –Ω–∞ shipping_methods |
| shipping_zone_id | uuid? | FK –Ω–∞ shipping_zones |
| shipping_rate_id | uuid? | FK –Ω–∞ shipping_rates |
| shipping_cost | numeric | –í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ |
| pickup_point_id | uuid? | FK –Ω–∞ pickup_points (–¥–ª—è —Å–∞–º–æ–≤–∏–≤–æ–∑—É) |
| shipping_data | jsonb? | –î–∞–Ω—ñ –¥–æ—Å—Ç–∞–≤–∫–∏ (–¢–¢–ù, –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è —Ç–æ—â–æ) |

---

## –°–∏—Å—Ç–µ–º–∞ —Ö—É–∫—ñ–≤ –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

### –ù–æ–≤—ñ —Ö—É–∫–∏ –¥–ª—è –ø–ª–∞–≥—ñ–Ω—ñ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏

| –•—É–∫ | –û–ø–∏—Å | –ö–æ–Ω—Ç–µ–∫—Å—Ç |
|-----|------|----------|
| `checkout.shipping.methods` | –î–æ–¥–∞–≤–∞–Ω–Ω—è/–º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É –º–µ—Ç–æ–¥—ñ–≤ | { cart, customer } |
| `checkout.shipping.rates` | –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–∞—Ä–∏—Ñ—ñ–≤ –ø–ª–∞–≥—ñ–Ω–æ–º | { method, zone, cart } |
| `checkout.shipping.form` | –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è —Ñ–æ—Ä–º–∏ | { method, form } |
| `checkout.shipping.validate` | –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –¥–æ—Å—Ç–∞–≤–∫–∏ | { method, data } |
| `order.shipping.process` | –û–±—Ä–æ–±–∫–∞ –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è | { order, shipping } |
| `admin.shipping.method.settings` | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É –≤ –∞–¥–º—ñ–Ω—Ü—ñ | { method } |

### –ü—Ä–∏–∫–ª–∞–¥ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –ø–ª–∞–≥—ñ–Ω–∞ –ù–æ–≤–∞ –ü–æ—à—Ç–∞ (–º–∞–π–±—É—Ç–Ω—î)

```text
–ü–ª–∞–≥—ñ–Ω —Ä–µ—î—Å—Ç—Ä—É—î:
1. –ú–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ type=plugin, plugin_name="nova_poshta"
2. –•—É–∫ checkout.shipping.form - –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –º—ñ—Å—Ç/–≤—ñ–¥–¥—ñ–ª–µ–Ω—å
3. –•—É–∫ checkout.shipping.rates - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —á–µ—Ä–µ–∑ API –ù–ü
4. –•—É–∫ order.shipping.process - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¢–¢–ù
```

---

## UI –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

```text
üì¶ –î–æ—Å—Ç–∞–≤–∫–∞ (–Ω–æ–≤–∏–π —Ä–æ–∑–¥—ñ–ª)
‚îú‚îÄ‚îÄ –°–ª—É–∂–±–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ —Å–ª—É–∂–±
‚îÇ   ‚îú‚îÄ‚îÄ –î–æ–¥–∞—Ç–∏/—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Å–ª—É–∂–±—É
‚îÇ   ‚îî‚îÄ‚îÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–¥–ª—è –∫–æ–∂–Ω–æ—ó —Å–ª—É–∂–±–∏)
‚îú‚îÄ‚îÄ –ó–æ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ –∑–æ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–æ–Ω–∏ (–ª–æ–∫–∞—Ü—ñ—ó + —Ç–∞—Ä–∏—Ñ–∏)
‚îú‚îÄ‚îÄ –¢–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É
‚îÇ   ‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ —Ç–æ—á–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ –î–æ–¥–∞—Ç–∏/—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ—á–∫—É
‚îî‚îÄ‚îÄ –õ–æ–∫–∞—Ü—ñ—ó (–¥–æ–≤—ñ–¥–Ω–∏–∫)
    ‚îú‚îÄ‚îÄ –Ü—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫
    ‚îî‚îÄ‚îÄ –Ü–º–ø–æ—Ä—Ç/–µ–∫—Å–ø–æ—Ä—Ç
```

### –°—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

1. **`/admin/shipping`** - Dashboard –¥–æ—Å—Ç–∞–≤–∫–∏ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
2. **`/admin/shipping/methods`** - –°–ø–∏—Å–æ–∫ —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏
3. **`/admin/shipping/methods/:id`** - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Å–ª—É–∂–±–∏
4. **`/admin/shipping/zones`** - –°–ø–∏—Å–æ–∫ –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏
5. **`/admin/shipping/zones/:id`** - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–æ–Ω–∏ + —Ç–∞—Ä–∏—Ñ–∏
6. **`/admin/shipping/pickup-points`** - –¢–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É
7. **`/admin/shipping/locations`** - –î–æ–≤—ñ–¥–Ω–∏–∫ –ª–æ–∫–∞—Ü—ñ–π

---

## –ó–º—ñ–Ω–∏ —É Checkout

### –û–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CheckoutDeliveryForm`

```text
1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏—Ö —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏ –∑ –ë–î
2. –î–∏–Ω–∞–º—ñ—á–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ:
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å–ª—É–∂–±–∏
   - –í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –∑–æ–Ω–∏ (—è–∫—â–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∞)
   - –ü–ª–∞–≥—ñ–Ω–Ω–∏—Ö —Ä–æ–∑—à–∏—Ä–µ–Ω—å —á–µ—Ä–µ–∑ PluginSlot
3. –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –¥–æ—Å—Ç–∞–≤–∫–∏:
   - –î–ª—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö: –∑–∞ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∑ –ë–î
   - –î–ª—è –ø–ª–∞–≥—ñ–Ω–Ω–∏—Ö: —á–µ—Ä–µ–∑ —Ö—É–∫ checkout.shipping.rates
4. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è shipping_cost –≤ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ
5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è total = subtotal + shipping_cost
```

### –ù–æ–≤—ñ PluginSlot —É checkout

```text
<PluginSlot name="checkout.shipping.before" />
<PluginSlot name="checkout.shipping.methods" context={{ cart }} />
<PluginSlot name="checkout.shipping.form" context={{ selectedMethod }} />
<PluginSlot name="checkout.shipping.after" />
```

---

## –õ–æ–≥—ñ–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ

### –ê–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞—Ä–∏—Ñ—É

```text
1. –û—Ç—Ä–∏–º–∞—Ç–∏ –∞–¥—Ä–µ—Å—É –∫–ª—ñ—î–Ω—Ç–∞ (–º—ñ—Å—Ç–æ/–æ–±–ª–∞—Å—Ç—å)
2. –ó–Ω–∞–π—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏:
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –∑–æ–Ω–∏ –∑–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º (sort_order)
   - –ó–Ω–∞–π—Ç–∏ –ø–µ—Ä—à—É, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ª–æ–∫–∞—Ü—ñ—ó
   - –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ is_default –∑–æ–Ω—É
3. –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–∞—Ä–∏—Ñ–∏ –¥–ª—è –æ–±—Ä–∞–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É –≤ —Ü—ñ–π –∑–æ–Ω—ñ
4. –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞ —Ç–∏–ø–æ–º calculation_type:
   - flat: –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ base_cost
   - weight: base_cost + (–≤–∞–≥–∞ * per_kg_cost)
   - free_from: —è–∫—â–æ subtotal >= free_from_amount, —Ç–æ 0, —ñ–Ω–∞–∫—à–µ base_cost
   - plugin: –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ö—É–∫ –¥–ª—è –ø–ª–∞–≥—ñ–Ω–∞
```

---

## –§–∞–∑–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –§–∞–∑–∞ 1: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –±–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å
- RLS-–ø–æ–ª—ñ—Ç–∏–∫–∏
- –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ (—Å–∏—Å—Ç–µ–º–Ω—ñ –º–µ—Ç–æ–¥–∏)

### –§–∞–∑–∞ 2: –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å (—Å–ª—É–∂–±–∏ —Ç–∞ –∑–æ–Ω–∏)
- CRUD –¥–ª—è —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏
- CRUD –¥–ª—è –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–∞—Ä–∏—Ñ–∞–º–∏

### –§–∞–∑–∞ 3: –î–æ–≤—ñ–¥–Ω–∏–∫ –ª–æ–∫–∞—Ü—ñ–π
- –Ü—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫
- –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- –ü—Ä–∏–≤'—è–∑–∫–∞ –¥–æ –∑–æ–Ω

### –§–∞–∑–∞ 4: –¢–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É
- CRUD –¥–ª—è —Ç–æ—á–æ–∫
- –í–∏–±—ñ—Ä –Ω–∞ checkout

### –§–∞–∑–∞ 5: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ Checkout
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ

### –§–∞–∑–∞ 6: –•—É–∫–∏ –¥–ª—è –ø–ª–∞–≥—ñ–Ω—ñ–≤
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤—Å—ñ—Ö —Ö—É–∫—ñ–≤
- PluginSlot –≤ checkout
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–ª–∞–≥—ñ–Ω—ñ–≤

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏

**–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:**
- `supabase/migrations/xxx_create_shipping_tables.sql`

**–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å:**
- `src/pages/admin/Shipping.tsx` - Dashboard
- `src/pages/admin/ShippingMethods.tsx` - –°–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥—ñ–≤
- `src/pages/admin/ShippingMethodEdit.tsx` - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É
- `src/pages/admin/ShippingZones.tsx` - –°–ø–∏—Å–æ–∫ –∑–æ–Ω
- `src/pages/admin/ShippingZoneEdit.tsx` - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–æ–Ω–∏
- `src/pages/admin/PickupPoints.tsx` - –¢–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É
- `src/pages/admin/PickupPointEdit.tsx` - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–æ—á–∫–∏
- `src/pages/admin/Locations.tsx` - –î–æ–≤—ñ–¥–Ω–∏–∫ –ª–æ–∫–∞—Ü—ñ–π

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- `src/components/admin/shipping/` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
- `src/components/checkout/ShippingMethodSelector.tsx` - –í–∏–±—ñ—Ä –º–µ—Ç–æ–¥—É
- `src/components/checkout/PickupPointSelector.tsx` - –í–∏–±—ñ—Ä —Ç–æ—á–∫–∏ —Å–∞–º–æ–≤–∏–≤–æ–∑—É

**–ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞:**
- `src/lib/shipping/calculateRate.ts` - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–∞—Ä–∏—Ñ—É
- `src/lib/shipping/findZone.ts` - –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–æ–Ω–∏
- `src/lib/shipping/types.ts` - TypeScript —Ç–∏–ø–∏

### –ó–º—ñ–Ω–∏ –≤ —ñ—Å–Ω—É—é—á–∏—Ö —Ñ–∞–π–ª–∞—Ö

- `src/components/admin/AdminSidebar.tsx` - –î–æ–¥–∞—Ç–∏ —Ä–æ–∑–¥—ñ–ª "–î–æ—Å—Ç–∞–≤–∫–∞"
- `src/App.tsx` - –î–æ–¥–∞—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏
- `src/pages/Checkout.tsx` - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è shipping
- `src/components/checkout/CheckoutDeliveryForm.tsx` - –ü–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- `src/components/checkout/CheckoutOrderSummary.tsx` - –î–æ–¥–∞—Ç–∏ shipping_cost
- `src/lib/plugins/types.ts` - –ù–æ–≤—ñ —Ç–∏–ø–∏ —Ö—É–∫—ñ–≤

---

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–ª–∞–Ω—É

–ü—ñ—Å–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –±–∞–∑–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ –æ–∫—Ä–µ–º–∏–π –ø–ª–∞–Ω –¥–ª—è –ø–ª–∞–≥—ñ–Ω–∞ "–ù–æ–≤–∞ –ü–æ—à—Ç–∞", —è–∫–∏–π –≤–∫–ª—é—á–∞—Ç–∏–º–µ:
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ API –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏
- –ê–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –º—ñ—Å—Ç —Ç–∞ –≤—ñ–¥–¥—ñ–ª–µ–Ω—å
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ API
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¢–¢–ù
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –ø–æ—Å–∏–ª–∫–∏
